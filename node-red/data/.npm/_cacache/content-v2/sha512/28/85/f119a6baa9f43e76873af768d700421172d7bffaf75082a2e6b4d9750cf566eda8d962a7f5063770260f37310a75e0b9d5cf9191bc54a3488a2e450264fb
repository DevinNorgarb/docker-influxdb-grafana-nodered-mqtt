{"_id":"node-red-contrib-influxdb-backup","_rev":"1-10ada9fc999abc9f4c3aa2c778c47685","name":"node-red-contrib-influxdb-backup","dist-tags":{"latest":"0.1.0"},"versions":{"0.1.0":{"name":"node-red-contrib-influxdb-backup","version":"0.1.0","description":"A node for backing up influx database using influxd backup","license":"Apache-2.0","author":{"name":"Colin Law"},"dependencies":{"util":"^0.12.3","pako":"^1.0.11","promisify-child-process":"^4.1.1"},"keywords":["node-red","influxdb","backup"],"homepage":"https://github.com/colinl/node-red-contrib-influxdb-backup","node-red":{"nodes":{"influxdb-backup":"influxdb-backup.js"}},"repository":{"type":"git","url":"git+https://github.com/colinl/node-red-contrib-influxdb-backup.git"},"gitHead":"cf934475a2f06eb9d120a2539f67269b807e76a9","bugs":{"url":"https://github.com/colinl/node-red-contrib-influxdb-backup/issues"},"_id":"node-red-contrib-influxdb-backup@0.1.0","_nodeVersion":"14.11.0","_npmVersion":"6.14.8","dist":{"integrity":"sha512-Q0qcyQXzzIsbr+fJ0pG0XJtIZnV19Ic/vjTknERVejx7N3p+1cbx0xWadyOX9bn+cWUNINn4Udm8M9dmWit2hA==","shasum":"a88a1fe57e01ad87666decb807221b82660e4c87","tarball":"https://registry.npmjs.org/node-red-contrib-influxdb-backup/-/node-red-contrib-influxdb-backup-0.1.0.tgz","fileCount":6,"unpackedSize":39731,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJfabPGCRA9TVsSAnZWagAArfgP/3D8SerH5tPgV6RH2cND\nh0N8D/GxDXCVZ5sI7RCJvuQb1Q4BwOAVlugdLLjoSFCXfzzX/jjy7DI1vWby\nnlPhQ7A6WMbJ/ZSR5pDngOXZ8lNqUVggNQehOfqpxmFsYIUEXf+E9Uqq9nRS\nMdoWJHxTS9oYjuPi/AlZtiNhDoLQefjwSexe9g4LD+SV2hebRwqgbkf4esRX\nc/DugO1Id7TEi/ZkO7jmljLNk9hsq0Zkf8ro2eNMRzO9icMEamGM8Ql7LOBa\n8k6AlsqLKOMQfu2QgmbgC6lO9gax4p0sI+gWZpWdoA6ux3+Xpj5192ef4smU\n9RuKsde39K4QyiT/yMw798DBSdSNJC09KD1OrqOn3i8BdFQZ3Qx+l856ny1L\nB93SNgaoMYGGKhD7KRQ9LSn69cTV8xWCGk+9MsCfR4fdHBbodyIJstpYSFHm\niHUDk9vxlWiMdHcSpcoVjFGw0Fbu4gigncGuo4y1TOPf/EHp5Dj1uJQuCgl9\nLcLz23PYC66dJWXsw6REhjOT3G5a9nqoOFYfL1jr1AY4GtfteOAUa8FcnG/M\nvRAJ1yQrc6L542FOxb95xhPg/tm5d9U31++gEHmzm78ng8lwjmiWgnmCMF0n\n8a6JFRI6IhYXd/HlIKuB7lNM8N3GJsHiiOeyiuQlGFZMBLYrZYzVgUGrzuq5\nmKBK\r\n=+CNS\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIBBoRdX5FuEuLRNMk1opOnUuCjrnLzjJnedW/RsHLwOdAiEAyB/Mcm5oP4gR4+ngQwvQ+cjdE4GYUdIpNQp4KdnF5Cg="}]},"maintainers":[{"name":"colinl","email":"npm@clanlaw.org.uk"}],"_npmUser":{"name":"colinl","email":"npm@clanlaw.org.uk"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/node-red-contrib-influxdb-backup_0.1.0_1600762822352_0.2327194071895895"},"_hasShrinkwrap":false}},"time":{"created":"2020-09-22T08:20:22.351Z","0.1.0":"2020-09-22T08:20:22.467Z","modified":"2022-05-11T03:23:49.250Z"},"maintainers":[{"name":"colinl","email":"npm@clanlaw.org.uk"}],"description":"A node for backing up influx database using influxd backup","homepage":"https://github.com/colinl/node-red-contrib-influxdb-backup","keywords":["node-red","influxdb","backup"],"repository":{"type":"git","url":"git+https://github.com/colinl/node-red-contrib-influxdb-backup.git"},"author":{"name":"Colin Law"},"bugs":{"url":"https://github.com/colinl/node-red-contrib-influxdb-backup/issues"},"license":"Apache-2.0","readme":"# node-red-contrib-influxdb-backup\nA Node-RED node for performing influx database backup using `influxd backup`.\n\nIt creates a backup of the specified database in the configured folder, using `portable` mode.\n\n## Prerequisites\n\nSee the [Influxdb docs for influxd backup](https://docs.influxdata.com/influxdb/v1.8/administration/backup_and_restore/) in order to understand exactly how influx backup/restore works.  In particular note the section about configuring `bind-address` in `influxdb.conf`.  The node has been tested using influxdb 1.8.0, at the time of writing it is unclear whether the backup command has changed for Influxdb 2.0.\n\nIf the Influx database is on a remote server then influx must also be installed on the machine running node-red, so that the `influxd` command is available.\n\n## Install\n\nUse the Node-RED `Manage Palette` menu option or run the following in your Node-RED user directory (typically `~/.node-red`):\n\n    npm install node-red-contrib-influxdb-backup\n\n## Configuration and Inputs\n\n### Folder\nThe destination folder for the backup files, may be configured as a string or as a message attribute. If the folder does not exist then it will be created.\n\n### Database\nThe database to be backed up, may be configured as a string or as a message attribute.  If this is missing or an empty string then all databases are backed up.\n\n### Host\nThe hostname or IP address of the machine running influxdb. Defaults to `locahost`. May be configured as a string or as a message attribute.\n\n### Port\nThe port to use to connect to influxdb. Defaults to `8088`. May be configured as a string or as a message attribute.\n\n### Clear folder\nIf this is `true` then any previous backup files are deleted before the backup is run.  May be configured as a boolean or provided as a message attribute (which must be boolean `true` or string \"true\", anything else is interpreted as false).\n\n### Unzip and rename files\nIf this is `true` then the backup files (which are `.tar.gz` files) are unzipped after the backup is performed, then they are all renamed from the standard format `YYYYMMDDTHHMMSSZ.*.tar.gz` to `<prefix>.*.tar`.  In addition the manifest file contents are adjusted for the modified filenames.  This is useful when using a regular backup strategy that uses incremental backups or some form of deduplication such as Borg or Back In Time.  Most of the files in the influx backup do not change at each backup, so the backup strategy does not need to make new copies of them (the timestamps will be different but the contents the same).  It is necessary to unzip the files as the original gz files do differ each time, I imagine the gz file includes the timestamps of the embedded files, which will be different.  May be configured as a boolean or provided as a message attribute (which must be boolean `true` or string \"true\", anything else is interpreted as false).  \nIf it is required to restore the backup it is just necessary to zip them up again, on linux `gzip *.tar` will suffice, then run the restore command as documented in the influx link earlier.\n\n### Prefix\nWhen Unzip and rename is requested then this sets the filename to use. May be configured as a string or as a message attribute.\n\n### Start time\nThe start of the time range to backup may be provided by passing a string in `msg.start`.  The string must be formatted exactly as defined in the Influxdb link above.  For example `\"2020-06-01T12:00:00Z\"`.\nIf `msg.start` is not provided then the backup will be from the earliest data in the database.\n\n### End time\nThe end of the time range to backup may be provided by passing a string in `msg.end`.  The string must be formatted exactly as defined in the Influxdb link above.  For example `\"2020-07-01T12:00:00Z\"`.\nIf `msg.end` is not provided then the backup will be up to the latest data in the database.\n\n## Outputs\n### 1. Standard Output \nThe standard output of the backup command.  Multiple progress messages will be sent as the backup proceeds.  This ouput is provided in case of problems, or to allow confirmation that the expected backup has been performed.\n\n### 2. Standard Error\nThe standard error output from the backup command, and error messages from other actions.  There may be multiple error messages.\n\n### 3. Return Code\nThe payload is an object containing the attribute `code` containing the return code. Zero implies success.  This message will be sent when the operation is complete.\n\n### Catch\nA linked Catch node will send a message containing details of any error.  There will be at most one Catch message.  There will not be both Catch and Complete messages.\n\n### Complete\nA linked Complete node will send a message on successful completion.  No message will be sent if there is an error.\n\n\n","readmeFilename":"README.md"}